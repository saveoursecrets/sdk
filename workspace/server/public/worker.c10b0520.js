(()=>{function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=e.parcelRequire809c;let a;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},e.parcelRequire809c=o),o.register("bGWGM",(function(e,n){var r,o;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>o),(t=>o=t));var a={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)a[e[n]]=t[e[n]]},o=function(t){var e=a[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o.register("8IoA4",(function(e,n){var r;t(e.exports,"getBundleURL",(()=>r),(t=>r=t));var o={};function a(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return a(t[2])}return"/"}(),o[t]=e),e}})),o("bGWGM").register(JSON.parse('{"2WX22":"worker.c10b0520.js","6DeOB":"sos_wasm_bg.3852e407.wasm"}'));const i=new Array(32).fill(void 0);function _(t){return i[t]}i.push(void 0,null,!0,!1);let s=0,c=null;function u(){return null!==c&&c.buffer===a.memory.buffer||(c=new Uint8Array(a.memory.buffer)),c}const d=new TextEncoder("utf-8"),l="function"==typeof d.encodeInto?function(t,e){return d.encodeInto(t,e)}:function(t,e){const n=d.encode(t);return e.set(n),{read:t.length,written:n.length}};function f(t,e,n){if(void 0===n){const n=d.encode(t),r=e(n.length);return u().subarray(r,r+n.length).set(n),s=n.length,r}let r=t.length,o=e(r);const a=u();let i=0;for(;i<r;i++){const e=t.charCodeAt(i);if(e>127)break;a[o+i]=e}if(i!==r){0!==i&&(t=t.slice(i)),o=n(o,r,r=i+3*t.length);const e=u().subarray(o+i,o+r);i+=l(t,e).written}return s=i,o}let b=null;function w(){return null!==b&&b.buffer===a.memory.buffer||(b=new Int32Array(a.memory.buffer)),b}let g=i.length;function p(t){const e=_(t);return function(t){t<36||(i[t]=g,g=t)}(t),e}const y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function h(t,e){return y.decode(u().subarray(t,t+e))}function v(t){g===i.length&&i.push(i.length+1);const e=g;return g=i[e],i[e]=t,e}function m(t,e){return u().subarray(t/1,t/1+e)}function k(t,e){try{return t.apply(this,e)}catch(t){a.__wbindgen_exn_store(v(t))}}y.decode();class E{static __wrap(t){const e=Object.create(E.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();a.__wbg_signup_free(t)}constructor(){const t=a.signup_new();return E.__wrap(t)}setPassphrase(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.signup_setPassphrase(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}setEncryptionPassphrase(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.signup_setEncryptionPassphrase(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}getEncryptionPassphrase(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.signup_getEncryptionPassphrase(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}generatePrivateKey(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.signup_generatePrivateKey(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}dispose(){a.signup_dispose(this.ptr)}}class A{static __wrap(t){const e=Object.create(A.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();a.__wbg_websigner_free(t)}constructor(){const t=a.websigner_new();return A.__wrap(t)}loadKeystore(t,e){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.websigner_loadKeystore(o,this.ptr,v(t),v(e));var n=w()[o/4+0],r=w()[o/4+1];if(w()[o/4+2])throw p(r);return p(n)}finally{a.__wbindgen_add_to_stack_pointer(16)}}sign(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.websigner_sign(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}}class S{static __wrap(t){const e=Object.create(S.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();a.__wbg_webvault_free(t)}constructor(){const t=a.webvault_new();return S.__wrap(t)}initialize(t,e,n){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_initialize(o,this.ptr,v(t),v(e),v(n));var r=w()[o/4+0];if(w()[o/4+1])throw p(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}importBuffer(t){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_importBuffer(n,this.ptr,v(t));var e=w()[n/4+0];if(w()[n/4+1])throw p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}getVaultMeta(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_getVaultMeta(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}id(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_id(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}name(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_name(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}label(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_label(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}create(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_create(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}read(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_read(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}update(t){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_update(n,this.ptr,v(t));var e=w()[n/4+0];if(w()[n/4+1])throw p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}delete(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_delete(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}unlock(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_unlock(r,this.ptr,v(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}lock(){a.webvault_lock(this.ptr)}buffer(){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_buffer(o,this.ptr);var t=w()[o/4+0],e=w()[o/4+1],n=w()[o/4+2];if(w()[o/4+3])throw p(n);var r=m(t,e).slice();return a.__wbindgen_free(t,1*e),r}finally{a.__wbindgen_add_to_stack_pointer(16)}}}var O;O=o("8IoA4").getBundleURL("2WX22")+o("bGWGM").resolve("6DeOB");var R=async function t(n){void 0===n&&(n=new URL(O));const r={wbg:{}};r.wbg.__wbg_log_7b91984099667bb9=function(t,e){console.log(h(t,e))},r.wbg.__wbindgen_json_serialize=function(t,e){const n=_(e),r=f(JSON.stringify(void 0===n?null:n),a.__wbindgen_malloc,a.__wbindgen_realloc),o=s;w()[t/4+1]=o,w()[t/4+0]=r},r.wbg.__wbindgen_object_drop_ref=function(t){p(t)},r.wbg.__wbindgen_error_new=function(t,e){return v(new Error(h(t,e)))},r.wbg.__wbindgen_json_parse=function(t,e){return v(JSON.parse(h(t,e)))},r.wbg.__wbg_new_693216e109162396=function(){return v(new Error)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,e){const n=f(_(e).stack,a.__wbindgen_malloc,a.__wbindgen_realloc),r=s;w()[t/4+1]=r,w()[t/4+0]=n},r.wbg.__wbg_error_09919627ac0992f5=function(t,e){try{console.error(h(t,e))}finally{a.__wbindgen_free(t,e)}},r.wbg.__wbg_getRandomValues_99bbe8a65f4aef87=function(){return k((function(t,e){_(t).getRandomValues(_(e))}),arguments)},r.wbg.__wbg_randomFillSync_378e02b85af41ab6=function(){return k((function(t,e,n){_(t).randomFillSync(m(e,n))}),arguments)},r.wbg.__wbg_process_5729605ce9d34ea8=function(t){return v(_(t).process)},r.wbg.__wbindgen_is_object=function(t){const e=_(t);return"object"==typeof e&&null!==e},r.wbg.__wbg_versions_531e16e1a776ee97=function(t){return v(_(t).versions)},r.wbg.__wbg_node_18b58a160b60d170=function(t){return v(_(t).node)},r.wbg.__wbindgen_is_string=function(t){return"string"==typeof _(t)},r.wbg.__wbg_static_accessor_NODE_MODULE_bdc5ca9096c68aeb=function(){return v(i)},r.wbg.__wbg_require_edfaedd93e302925=function(){return k((function(t,e,n){return v(_(t).require(h(e,n)))}),arguments)},r.wbg.__wbg_crypto_2bc4d5b05161de5b=function(t){return v(_(t).crypto)},r.wbg.__wbg_msCrypto_d003eebe62c636a9=function(t){return v(_(t).msCrypto)},r.wbg.__wbg_newnoargs_f579424187aa1717=function(t,e){return v(new Function(h(t,e)))},r.wbg.__wbg_call_89558c3e96703ca1=function(){return k((function(t,e){return v(_(t).call(_(e)))}),arguments)},r.wbg.__wbindgen_object_clone_ref=function(t){return v(_(t))},r.wbg.__wbg_self_e23d74ae45fb17d1=function(){return k((function(){return v(self.self)}),arguments)},r.wbg.__wbg_window_b4be7f48b24ac56e=function(){return k((function(){return v(window.window)}),arguments)},r.wbg.__wbg_globalThis_d61b1f48a57191ae=function(){return k((function(){return v(globalThis.globalThis)}),arguments)},r.wbg.__wbg_global_e7669da72fd7f239=function(){return k((function(){return v(e.global)}),arguments)},r.wbg.__wbindgen_is_undefined=function(t){return void 0===_(t)},r.wbg.__wbg_buffer_5e74a88a1424a2e0=function(t){return v(_(t).buffer)},r.wbg.__wbg_new_e3b800e570795b3c=function(t){return v(new Uint8Array(_(t)))},r.wbg.__wbg_set_5b8081e9d002f0df=function(t,e,n){_(t).set(_(e),n>>>0)},r.wbg.__wbg_length_30803400a8f15c59=function(t){return _(t).length},r.wbg.__wbg_newwithlength_5f4ce114a24dfe1e=function(t){return v(new Uint8Array(t>>>0))},r.wbg.__wbg_subarray_a68f835ca2af506f=function(t,e,n){return v(_(t).subarray(e>>>0,n>>>0))},r.wbg.__wbindgen_throw=function(t,e){throw new Error(h(t,e))},r.wbg.__wbindgen_memory=function(){return v(a.memory)},("string"==typeof n||"function"==typeof Request&&n instanceof Request||"function"==typeof URL&&n instanceof URL)&&(n=fetch(n));const{instance:o,module:i}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await n,r);return a=o.exports,t.__wbindgen_wasm_module=i,a.__wbindgen_start(),a};const P=Symbol("Comlink.proxy"),L=Symbol("Comlink.endpoint"),M=Symbol("Comlink.releaseProxy"),T=Symbol("Comlink.thrown"),j=t=>"object"==typeof t&&null!==t||"function"==typeof t,W=new Map([["proxy",{canHandle:t=>j(t)&&t[P],serialize(t){const{port1:e,port2:n}=new MessageChannel;return N(t,e),[n,[n]]},deserialize(t){return t.start(),I(t,[],e);var e}}],["throw",{canHandle:t=>j(t)&&T in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function N(t,e=self){e.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:a,path:i}=Object.assign({path:[]},r.data),_=(r.data.argumentList||[]).map(G);let s;try{const e=i.slice(0,-1).reduce(((t,e)=>t[e]),t),n=i.reduce(((t,e)=>t[e]),t);switch(a){case"GET":s=n;break;case"SET":e[i.slice(-1)[0]]=G(r.data.value),s=!0;break;case"APPLY":s=n.apply(e,_);break;case"CONSTRUCT":{const t=new n(..._);c=t,s=Object.assign(c,{[P]:!0})}break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;N(t,n),s=function(t,e){return D.set(t,e),t}(e,[e])}break;case"RELEASE":s=void 0;break;default:return}}catch(t){s={value:t,[T]:0}}var c;Promise.resolve(s).catch((t=>({value:t,[T]:0}))).then((t=>{const[r,i]=z(t);e.postMessage(Object.assign(Object.assign({},r),{id:o}),i),"RELEASE"===a&&(e.removeEventListener("message",n),x(e))}))})),e.start&&e.start()}function x(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function C(t){if(t)throw new Error("Proxy has been released and is not useable")}function I(t,e=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(n,a){if(C(r),a===M)return()=>H(t,{type:"RELEASE",path:e.map((t=>t.toString()))}).then((()=>{x(t),r=!0}));if("then"===a){if(0===e.length)return{then:()=>o};const n=H(t,{type:"GET",path:e.map((t=>t.toString()))}).then(G);return n.then.bind(n)}return I(t,[...e,a])},set(n,o,a){C(r);const[i,_]=z(a);return H(t,{type:"SET",path:[...e,o].map((t=>t.toString())),value:i},_).then(G)},apply(n,o,a){C(r);const i=e[e.length-1];if(i===L)return H(t,{type:"ENDPOINT"}).then(G);if("bind"===i)return I(t,e.slice(0,-1));const[_,s]=U(a);return H(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:_},s).then(G)},construct(n,o){C(r);const[a,i]=U(o);return H(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:a},i).then(G)}});return o}function U(t){const e=t.map(z);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const D=new WeakMap;function z(t){for(const[e,n]of W)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},D.get(t)||[]]}function G(t){switch(t.type){case"HANDLER":return W.get(t.name).deserialize(t.value);case"RAW":return t.value}}function H(t,e,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(n){n.data&&n.data.id&&n.data.id===o&&(t.removeEventListener("message",e),r(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)}))}console.log("WORKER IS INITIALIZING"),async function(){await R(),console.log("Worker finished initializing"),self.postMessage({ready:!0})}(),N({WebVault:S,WebSigner:A,Signup:E,generatePassphrase:function(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.generatePassphrase(r,t);var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}})})();
//# sourceMappingURL=worker.c10b0520.js.map
