(()=>{function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=e.parcelRequire809c;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},e.parcelRequire809c=o),o.register("bGWGM",(function(e,n){var r,o;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>o),(t=>o=t));var a={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)a[e[n]]=t[e[n]]},o=function(t){var e=a[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o.register("4yras",(function(n,r){let a;t(n.exports,"start",(()=>v),(t=>v=t)),t(n.exports,"generatePassphrase",(()=>E),(t=>E=t)),t(n.exports,"patch",(()=>S),(t=>S=t)),t(n.exports,"Signup",(()=>x),(t=>x=t)),t(n.exports,"WebSigner",(()=>O),(t=>O=t)),t(n.exports,"WebVault",(()=>R),(t=>R=t)),t(n.exports,"initSync",(()=>L),(t=>L=t)),t(n.exports,"default",(()=>T),(t=>T=t));const i=new Array(32).fill(void 0);function _(t){return i[t]}i.push(void 0,null,!0,!1);let s,c=0;function u(){return 0===s.byteLength&&(s=new Uint8Array(a.memory.buffer)),s}const d=new TextEncoder("utf-8"),f="function"==typeof d.encodeInto?function(t,e){return d.encodeInto(t,e)}:function(t,e){const n=d.encode(t);return e.set(n),{read:t.length,written:n.length}};function l(t,e,n){if(void 0===n){const n=d.encode(t),r=e(n.length);return u().subarray(r,r+n.length).set(n),c=n.length,r}let r=t.length,o=e(r);const a=u();let i=0;for(;i<r;i++){const e=t.charCodeAt(i);if(e>127)break;a[o+i]=e}if(i!==r){0!==i&&(t=t.slice(i)),o=n(o,r,r=i+3*t.length);const e=u().subarray(o+i,o+r);i+=f(t,e).written}return c=i,o}let b;function w(){return 0===b.byteLength&&(b=new Int32Array(a.memory.buffer)),b}let g=i.length;function p(t){const e=_(t);return function(t){t<36||(i[t]=g,g=t)}(t),e}const y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function h(t,e){return y.decode(u().subarray(t,t+e))}function m(t){g===i.length&&i.push(i.length+1);const e=g;return g=i[e],i[e]=t,e}function v(){a.start()}function k(t,e){return u().subarray(t/1,t/1+e)}function E(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.generatePassphrase(r,t);var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}function S(t){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.patch(i,m(t));var e=w()[i/4+0],n=w()[i/4+1],r=w()[i/4+2];if(w()[i/4+3])throw p(r);var o=k(e,n).slice();return a.__wbindgen_free(e,1*n),o}finally{a.__wbindgen_add_to_stack_pointer(16)}}function A(t,e){try{return t.apply(this,e)}catch(t){a.__wbindgen_exn_store(m(t))}}y.decode();class x{static __wrap(t){const e=Object.create(x.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();a.__wbg_signup_free(t)}constructor(){const t=a.signup_new();return x.__wrap(t)}setPassphrase(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.signup_setPassphrase(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}setEncryptionPassphrase(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.signup_setEncryptionPassphrase(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}getEncryptionPassphrase(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.signup_getEncryptionPassphrase(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}generatePrivateKey(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.signup_generatePrivateKey(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}dispose(){a.signup_dispose(this.ptr)}}class O{static __wrap(t){const e=Object.create(O.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();a.__wbg_websigner_free(t)}constructor(){const t=a.websigner_new();return O.__wrap(t)}loadKeystore(t,e){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.websigner_loadKeystore(o,this.ptr,m(t),m(e));var n=w()[o/4+0],r=w()[o/4+1];if(w()[o/4+2])throw p(r);return p(n)}finally{a.__wbindgen_add_to_stack_pointer(16)}}sign(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.websigner_sign(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}}class R{static __wrap(t){const e=Object.create(R.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();a.__wbg_webvault_free(t)}constructor(){const t=a.webvault_new();return R.__wrap(t)}initialize(t,e,n){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_initialize(o,this.ptr,m(t),m(e),m(n));var r=w()[o/4+0];if(w()[o/4+1])throw p(r)}finally{a.__wbindgen_add_to_stack_pointer(16)}}importBuffer(t){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_importBuffer(n,this.ptr,m(t));var e=w()[n/4+0];if(w()[n/4+1])throw p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}getVaultMeta(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_getVaultMeta(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}id(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_id(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}name(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_name(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}label(){try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_label(n,this.ptr);var t=w()[n/4+0],e=w()[n/4+1];if(w()[n/4+2])throw p(e);return p(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}create(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_create(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}read(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_read(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}update(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_update(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}delete(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_delete(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}unlock(t){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_unlock(r,this.ptr,m(t));var e=w()[r/4+0],n=w()[r/4+1];if(w()[r/4+2])throw p(n);return p(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}lock(){a.webvault_lock(this.ptr)}buffer(){try{const o=a.__wbindgen_add_to_stack_pointer(-16);a.webvault_buffer(o,this.ptr);var t=w()[o/4+0],e=w()[o/4+1],n=w()[o/4+2];if(w()[o/4+3])throw p(n);var r=k(t,e).slice();return a.__wbindgen_free(t,1*e),r}finally{a.__wbindgen_add_to_stack_pointer(16)}}}function P(){const t={wbg:{}};return t.wbg.__wbg_log_3ce8f72240c791d0=function(t,e){console.log(h(t,e))},t.wbg.__wbindgen_json_serialize=function(t,e){const n=_(e),r=l(JSON.stringify(void 0===n?null:n),a.__wbindgen_malloc,a.__wbindgen_realloc),o=c;w()[t/4+1]=o,w()[t/4+0]=r},t.wbg.__wbindgen_object_drop_ref=function(t){p(t)},t.wbg.__wbindgen_error_new=function(t,e){return m(new Error(h(t,e)))},t.wbg.__wbindgen_json_parse=function(t,e){return m(JSON.parse(h(t,e)))},t.wbg.__wbg_new_693216e109162396=function(){return m(new Error)},t.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,e){const n=l(_(e).stack,a.__wbindgen_malloc,a.__wbindgen_realloc),r=c;w()[t/4+1]=r,w()[t/4+0]=n},t.wbg.__wbg_error_09919627ac0992f5=function(t,e){try{console.error(h(t,e))}finally{a.__wbindgen_free(t,e)}},t.wbg.__wbg_randomFillSync_378e02b85af41ab6=function(){return A((function(t,e,n){_(t).randomFillSync(k(e,n))}),arguments)},t.wbg.__wbg_getRandomValues_99bbe8a65f4aef87=function(){return A((function(t,e){_(t).getRandomValues(_(e))}),arguments)},t.wbg.__wbg_process_5729605ce9d34ea8=function(t){return m(_(t).process)},t.wbg.__wbindgen_is_object=function(t){const e=_(t);return"object"==typeof e&&null!==e},t.wbg.__wbg_versions_531e16e1a776ee97=function(t){return m(_(t).versions)},t.wbg.__wbg_node_18b58a160b60d170=function(t){return m(_(t).node)},t.wbg.__wbindgen_is_string=function(t){return"string"==typeof _(t)},t.wbg.__wbg_static_accessor_NODE_MODULE_bdc5ca9096c68aeb=function(){return m(n)},t.wbg.__wbg_require_edfaedd93e302925=function(){return A((function(t,e,n){return m(_(t).require(h(e,n)))}),arguments)},t.wbg.__wbg_crypto_2bc4d5b05161de5b=function(t){return m(_(t).crypto)},t.wbg.__wbg_msCrypto_d003eebe62c636a9=function(t){return m(_(t).msCrypto)},t.wbg.__wbg_newnoargs_f579424187aa1717=function(t,e){return m(new Function(h(t,e)))},t.wbg.__wbg_call_89558c3e96703ca1=function(){return A((function(t,e){return m(_(t).call(_(e)))}),arguments)},t.wbg.__wbindgen_object_clone_ref=function(t){return m(_(t))},t.wbg.__wbg_self_e23d74ae45fb17d1=function(){return A((function(){return m(self.self)}),arguments)},t.wbg.__wbg_window_b4be7f48b24ac56e=function(){return A((function(){return m(window.window)}),arguments)},t.wbg.__wbg_globalThis_d61b1f48a57191ae=function(){return A((function(){return m(globalThis.globalThis)}),arguments)},t.wbg.__wbg_global_e7669da72fd7f239=function(){return A((function(){return m(e.global)}),arguments)},t.wbg.__wbindgen_is_undefined=function(t){return void 0===_(t)},t.wbg.__wbg_buffer_5e74a88a1424a2e0=function(t){return m(_(t).buffer)},t.wbg.__wbg_new_e3b800e570795b3c=function(t){return m(new Uint8Array(_(t)))},t.wbg.__wbg_set_5b8081e9d002f0df=function(t,e,n){_(t).set(_(e),n>>>0)},t.wbg.__wbg_length_30803400a8f15c59=function(t){return _(t).length},t.wbg.__wbg_newwithlength_5f4ce114a24dfe1e=function(t){return m(new Uint8Array(t>>>0))},t.wbg.__wbg_subarray_a68f835ca2af506f=function(t,e,n){return m(_(t).subarray(e>>>0,n>>>0))},t.wbg.__wbindgen_throw=function(t,e){throw new Error(h(t,e))},t.wbg.__wbindgen_memory=function(){return m(a.memory)},t}function W(t,e){return a=t.exports,M.__wbindgen_wasm_module=e,b=new Int32Array(a.memory.buffer),s=new Uint8Array(a.memory.buffer),a.__wbindgen_start(),a}function L(t){const e=P(),n=new WebAssembly.Module(t);return W(new WebAssembly.Instance(n,e),n)}async function M(t){void 0===t&&(t=new URL(o("fOwxI")));const e=P();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return W(n,r)}var T=M})),o.register("fOwxI",(function(t,e){t.exports=o("8IoA4").getBundleURL("2WX22")+o("bGWGM").resolve("8mXX7")})),o.register("8IoA4",(function(e,n){var r;t(e.exports,"getBundleURL",(()=>r),(t=>r=t));var o={};function a(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(t)return a(t[2])}return"/"}(),o[t]=e),e}})),o("bGWGM").register(JSON.parse('{"2WX22":"worker.84bc89da.js","8mXX7":"wasm_bindings_bg.e2396f97.wasm"}'));var a=o("4yras");const i=Symbol("Comlink.proxy"),_=Symbol("Comlink.endpoint"),s=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.thrown"),u=t=>"object"==typeof t&&null!==t||"function"==typeof t,d=new Map([["proxy",{canHandle:t=>u(t)&&t[i],serialize(t){const{port1:e,port2:n}=new MessageChannel;return f(t,e),[n,[n]]},deserialize(t){return t.start(),w(t,[],e);var e}}],["throw",{canHandle:t=>u(t)&&c in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function f(t,e=self){e.addEventListener("message",(function n(r){if(!r||!r.data)return;const{id:o,type:a,path:_}=Object.assign({path:[]},r.data),s=(r.data.argumentList||[]).map(h);let u;try{const e=_.slice(0,-1).reduce(((t,e)=>t[e]),t),n=_.reduce(((t,e)=>t[e]),t);switch(a){case"GET":u=n;break;case"SET":e[_.slice(-1)[0]]=h(r.data.value),u=!0;break;case"APPLY":u=n.apply(e,s);break;case"CONSTRUCT":{const t=new n(...s);d=t,u=Object.assign(d,{[i]:!0})}break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;f(t,n),u=function(t,e){return p.set(t,e),t}(e,[e])}break;case"RELEASE":u=void 0;break;default:return}}catch(t){u={value:t,[c]:0}}var d;Promise.resolve(u).catch((t=>({value:t,[c]:0}))).then((t=>{const[r,i]=y(t);e.postMessage(Object.assign(Object.assign({},r),{id:o}),i),"RELEASE"===a&&(e.removeEventListener("message",n),l(e))}))})),e.start&&e.start()}function l(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function b(t){if(t)throw new Error("Proxy has been released and is not useable")}function w(t,e=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(n,a){if(b(r),a===s)return()=>m(t,{type:"RELEASE",path:e.map((t=>t.toString()))}).then((()=>{l(t),r=!0}));if("then"===a){if(0===e.length)return{then:()=>o};const n=m(t,{type:"GET",path:e.map((t=>t.toString()))}).then(h);return n.then.bind(n)}return w(t,[...e,a])},set(n,o,a){b(r);const[i,_]=y(a);return m(t,{type:"SET",path:[...e,o].map((t=>t.toString())),value:i},_).then(h)},apply(n,o,a){b(r);const i=e[e.length-1];if(i===_)return m(t,{type:"ENDPOINT"}).then(h);if("bind"===i)return w(t,e.slice(0,-1));const[s,c]=g(a);return m(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:s},c).then(h)},construct(n,o){b(r);const[a,i]=g(o);return m(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:a},i).then(h)}});return o}function g(t){const e=t.map(y);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const p=new WeakMap;function y(t){for(const[e,n]of d)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},p.get(t)||[]]}function h(t){switch(t.type){case"HANDLER":return d.get(t.name).deserialize(t.value);case"RAW":return t.value}}function m(t,e,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(n){n.data&&n.data.id&&n.data.id===o&&(t.removeEventListener("message",e),r(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)}))}console.log("WORKER IS INITIALIZING"),async function(){await a.default(),console.log("Worker finished initializing"),self.postMessage({ready:!0})}(),f({WebVault:a.WebVault,WebSigner:a.WebSigner,Signup:a.Signup,generatePassphrase:a.generatePassphrase,patch:a.patch})})();
//# sourceMappingURL=worker.84bc89da.js.map
