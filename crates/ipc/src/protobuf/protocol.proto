syntax = "proto3";

package protocol;

// IPC request packet.
message WireIpcRequest {
  // Message identifier.
  uint64 message_id = 1;
  // Request body.
  WireIpcRequestBody body = 2;
}

// IPC request body.
message WireIpcRequestBody {
  // Inner values.
  oneof inner {
    // Request a list of accounts.
    WireVoidBody list_accounts = 1;

    // Request to authenticate to an account.
    WireAuthenticateBody authenticate  = 2;
  }
}

// Void request body.
message WireVoidBody {}

// Authenticate request body.
message WireAuthenticateBody {
  // Account address.
  string address = 1;
}

// IPC response packet.
message WireIpcResponse {
  // Message identifier.
  uint64 message_id = 1;
  // Response result.
  oneof result {
    // Error result.
    WireIpcResponseError error = 2;
    // Result body.
    WireIpcResponseBody body = 3;
  }
}

// IPC response body.
message WireIpcResponseBody {
  // Inner values.
  oneof inner {
    // List accounts body.
    WireAccountList list_accounts = 1;
    // Authenticate body.
    WireAuthenticateOutcome authenticate = 2;
  }
}

// IPC response error.
message WireIpcResponseError {
  // Error code.
  int32 code = 1;
  // Error message.
  string message = 2;
}

// List of accounts.
message WireAccountList {
  // Collection of accounts.
  repeated WireAccountInfo accounts = 1;
}

// Outcome of an authentication request.
enum WireAuthenticateOutcome {
  // Account not found.
  NotFound = 0;
  // Authentication success.
  Success = 1;
  // User canceled.
  Canceled = 2;
  // Timed out waiting for user input.
  TimedOut = 3;
}

// Information about an account.
message WireAccountInfo {
  // Public identity information.
  WirePublicIdentity public_id = 1;
  // Whether the account is currently authenticated.
  bool authenticated = 2;
}

// Public identity for an account.
message WirePublicIdentity {
  // Account address.
  string address = 1;
  // Account label.
  string label = 2;
}
